

\section{Conclusion}

% Why this is unique
In this thesis, a generic computational market environment with simplistic
zero-intelligent trading agents was introduced. The model has several interesting features: 
the model supports multiple markets and any asset can act as the currency
for a market. In addition, tick sizes are implemented naturally by forcing
the quantities of traded asset and the amount of currency to be integers.

% Equilibrium converge
%TODO Supervisor: Tasta suurin osa summary of results -kappaleeseen ja tassa vain todella lyhyt kertaus
The model converges rapidly to equilibrium price which was slighly lower
than expected from the ratio of the assets. Interestingly, the convergence
occurs more rapidly with lower starting price than higher. The model manages 
to somewhat capture the stylized facts observed in actual markets: the intrasession 
returns are fat-tailed and some short-term volatility clusters were observed. 
However, there was some negative moderately short-term autocorrelation in the 
absolute returns and the fat-tails of returns are not carried over to the returns between sessions. 
This is also somewhat inline with the literature with comparable models.
% TODO: Specify which studies

% Shocks
The model was also tested with negative and positive shocks by changing the 
traders' probabilities to submit bid and ask orders. It was found out that
the global balance between assets is not necessarily the only driving factor for the 
equilibrium price in a market populated with zero-intelligent traders 
and the price can be manipulated by changing these values. Furthermore, this finding suggests that 
solely the balance, or imbalance, of the sides in an order book may have an important role in 
driving the price. For example, if the bid side is thinner than the ask side it may be more probable 
that there will come an ask order that consumes larger proportion of the bid side than the other way 
around. As the ask order consumes a large chunk of the bid side the price will decrease rapidly, 
or end up in free fall if the side is completely consumed. In addition, negative shock
also increased the total quantities on both sides of the order book while
positive shock had the opposite effect. Lower price is attributed to 
more liquid market even though the global balance of assets is unaffected.
This is due to that the amount of assets the buyers can bid are limited by the 
price while the amount of asset the sellers can sell are not. 
%TODO Supervisor: Alakappale, "answering the research questions..."

\subsection{Limitations of the Model}

% Time handling: unclear how one timestamp translates to real time (ie. minutes)
% issue with bid-ask symmetricity
% assuptions with ZI traders
% Lack of parallerization: some simulations took like 6 hours
% Should the ZI traders distribution's mean be linked to best price of the opposite book instead or something else?

% Lack of real data behind the model & time handling
There was no real order book data to reference in creation of the model
introduced in this thesis. Therefore, it is unclear how aspects of this
model translates to actual markets or what the characteristics of the 
asset could be that this model resembles. For instance, the time aspect
remains unknown as it is not obvious what the time interval could
realistically be between the placement decisions or the trading 
sessions. Furthermore, the definition of short-term and long-term is
relatively unclear in the model.

% Tick size, integer quantity, bid-ask asymmetricity
Even though introducing
tick sizes ultimately made the model more realistic it did cause a 
set of challenges. With combination of the traded quantities being
also integers the model behaves inefficiently with very low and very
high market prices due to the quantity and the price increments. This
is however also present in actual markets but there are solutions to handle
this such as splits or reverse splits in stock markets. Perhaps an
automated splitting mechanics could overcome this issue.

% ZI investor limitations
Even though the sophistication of the trading agents was in little
importance for the purpose of this thesis, there were some design
choices that may have had an impact on the dynamics of the model.
The definition of zero intelligence is not explicit in terms of
concrete behaviour. Whether it is less intelligent to draw the
order prices from a normal distribution than from a uniform
distribution or not remains debatable. In addition, both choices
introduce parameters to be defined. Setting the mean of the
normal distribution of the order prices to float with the 
market price possibly enabled some of the interesting dynamics
observed in the simulation but it may have taken part in causing the
autocorrelation in the model. Whether it is more appropriate
to fix the price to other values derived from the market,
such as the best price of the opposite book as done by
\citet{Genoa01}, also remains unclear. In addition, the 
standard deviation of the distribution was set to a constant
which could also be a factor playing a role in the dynamics 
of the order book with different equilibrium prices. Setting
it to be dependent on the previous volatility of the model
could produce interesting dynamics including the volatility
cluster but this could be seen as a violation of the definition
of zero intelligence as they would then be able to react on the risk level
of the market. Setting it to depend on the absolute
current price level of the market may be more appropriate to 
maintain the level of rationality of the investors.  

% Technical aspects
Regarding to the technical aspects of the model, some experiments 
took hours to complete. The model is thoroughly parametrized but 
there could be substantial increase to code execution to be 
achieved with better type stability, by avoiding the use of 
abstract types and parallerizing some sections of the code. 
Optimizing may however increase the complexity of the code 
causing it harder to debug and maintain. The code did, however, 
run fast enough for the experiments of this thesis but may be 
an issue if complex and long multi-asset simulations are tested. 

% Language choice
Julia programming language suited on the task well. The functional nature
of the language provided straightforward way to implement matching engine
efficiently. In addition, the mutable structs enabled modularization of the
components of the model. However, as the language is relatively new it is
lacking extensive ecosystems as more matured languages, such as Python,
has. This was not a problem in the development of this model as the topic is 
rather specific and does not require complex algorithms. This may come as an
issue if the complexity of the trader agents is increased. \citet{JuliaML2020} 
discussed the recent state of the language, particularly in terms of machine 
learning, and they noted that the language is more mature in the area of
supervised learning algorithms than in the area of unsupervised algorithms.
They did not, however, discuss about evolutionary algorithms or reinforcement
learning which are more prevalent in the area of agent-based computational economics.
According to them the greatest challenge of the language is the small ecosystem
of packages compared to other high-level languages. This can be mitigated
with interfacing other languages that do have the required packages but 
\author{JuliaML2020} also argued that there is room for improvement for embedding
other languages to Julia and vice versa.

\subsection{Further Research Topics}
% Divident/interest payout
% Only simple stuff done in this thesis
There are several interesting additional experiments that could be done with
the model out-of-the-box. The parameters of the zero-intelligent traders could
be experimented with or the model could be used to study the behaviour of 
multi-asset markets including:
\begin{itemize}
    \item cross asset markets: a set of markets \emph{X}, \emph{Y} and \emph{Z} 
        in which \emph{X} trades asset \emph{b} with asset \emph{a}, 
        \emph{Y} trades asset \emph{c} with asset \emph{b} 
        and market \emph{Z} trades asset \emph{d} with asset \emph{c},
    \item arbitrage enabled markets: a set of markets \emph{X} and \emph{Y} 
        in which both markets trade asset \emph{a} with asset \emph{b},
    \item opposing markets: a set of markets \emph{X} and \emph{Y} 
        in which \emph{X} trades asset \emph{b} with asset \emph{a} 
        and \emph{Y} trades asset \emph{a} with asset \emph{b}
\end{itemize}

% More advanded traders
Also, as the project is heavily modularized the structure allows for development of more advanced
trading agents. The model could be transformed to experiment with more advanced
market setups introduced by the literature of agent-based computational economics. As discussed,
there are some packages for machine learning found in Julia's ecosystem thus 
a learning trading agent could be constructed with readily available algorithms.

% More advanced microstructure
As it is relatively trivial to modify the clearing algorithm of the model to 
act as a call market one could also build more percise representation of a
specific stock exchange. With introduction of opening and closing crosses,
which are essentially call markets at the beginning and at the end of each 
trading day, a typical Nasdaq's trading day could be imitated. In addition,
the exclusion of pre- and post-market could be simulated by allowing only
specific traders to trade in specific trading sessions. This could be done
by modifying the main level of the simulation. 

% Centralized market place
As the effect of the microstructure to the market dynamics is relatively 
less understood in decentralized markets it would be interesting to modify 
the model to such and run similar analysis. Instead of exchanges, the trading 
would be conducted via trading networks: each trader has links to other traders, 
trading partners. When a trader states an order its trading partners are 
looped through and checked if any of the partners is willing to participate 
on the order and form a trade. However, such modification would require 
completely new matching engine and the trading agents need to be substantially 
refactored.
